# Python 병렬처리 고민. Multi Process? Multi Thread?

고성능 파이썬 백엔드 작업을 위해서는 병렬처리에대한 고민을 한번 쯤 해볼 수 있습니다. 일반적으로 코드 구현에만 집중하여 성능향상에 고민을 해보지 않은 개발자의 경우 병렬처리의 필요성을 경험해보지 못하거나, Process와 Thread의 개념을 이해하지 못하고 있는 경우도 종종 있습니다. 특히 파이썬의 경우 다른 언어에비해 배우기 쉽고 편의성이 좋지만, 실행 속도 측면에서 느리다는 치명적인 단점이 있기 때문에, Thread와 Process에 대한 이해를 바탕으로 Multi Process, Multi Thread 적용에대해 알고있는 것이 중요합니다.

<br>

## Process? Thread? 
일반적으로 CS공부를 하면 프로세스와 쓰레드를 아래처럼 암기하는 경우가 많습니다.
- Process : 컴퓨터에서 실행되고 있는 프로그램을 말하며, 운영체제에 의해 할당된 작업
- Thread : 프로세스 내의 작업의 흐름

위와 같이 암기했을 때 혼돈하기 쉽고 구체적으로 어떤 역할하는지 헷갈릴 수 있습니다. 각각의 역할의 이해하기 위해서는 우선 CPU가 멀티태스킹을 어떻게하는지 부터 확인할 필요가 있습니다. 일반적으로 우리는 컴퓨터를 할 때 파일을 다운로드 받고, 카카오톡도하며 한 번에 여러가지 일을 하며 이는 우리 눈에 보이지는 않는 여러 작업까지 포함하면 수백 개가 넘어갈 수 있습니다. 하지만 일반적으로 컴퓨터의 머리를 담당하는 CPU는 코어 당 한 번에 하나의 프로세스 즉, 하나의 일만 처리할 수 있습니다. 어떻게 수 백개의 일을 거의 한 번에 보이는 것처럼 처리되는지 이해하기 위해서는 병렬 처리와 병행 처리 두가지 이해가 필요합니다.
- 병렬 처리 : 여러 작업을 동시에 실행하는 방법. 2개 이상의 코어가 각기 다른 프로세스의 명령을 실행해서 각 프로세스가 같은 순간에 실행되도록하는 방법
- 병행 처리 : 하나의 코어가 여러 프로세스를 조금씩 처리하는 것을 의미

즉, 컴퓨터의 코어는 각각 하나의 프로세스를 처리하여 2개의 코어를 가진 컴퓨터의 경우 한 번에 2가지 일을 병렬처리합니다. 그리고 해당 코어는 하나의 프로세스를 처리가 다 끝날 때까지 기다리는 것이 아닌 여러 프로세스를 돌아다니면서 조금씩 병행 처리를 합니다. 여기서 하나의 코어가 여러 프로세스를 병행처리하는 것을 컨택스트 스위칭이라 하며, 여러 코어가 여러개의 프로세스를 함께 진행하는 것을 멀티프로세싱이라 부릅니다.

